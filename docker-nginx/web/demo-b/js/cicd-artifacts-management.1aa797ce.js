(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cicd-artifacts-management","dynamic-table"],{1016:function(e,t,n){"use strict";n.r(t);var r=n("6c0e");n.d(t,"DynamicTable",(function(){return r["default"]}))},"13d5":function(e,t,n){"use strict";var r=n("23e7"),a=n("d58f").left,o=n("a640"),c=n("2d00"),i=n("605d"),l=o("reduce"),u=!i&&c>79&&c<83;r({target:"Array",proto:!0,forced:!l||u},{reduce:function(e){return a(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"5b38":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return l}));var r=n("a526"),a=n("3bb8");function o(e){return r["a"].request({url:"/devops/component/getComponents",method:a["b"].GET,params:e})}function c(e){return r["a"].request({url:"/devops/component/createComponent",method:a["b"].POST,headers:{"Content-type":a["a"].JSON},params:e},{isParseToJson:!0})}function i(e){return r["a"].request({url:"/devops/component/updateComponent",method:a["b"].PUT,params:e})}function l(e){return r["a"].request({url:"/devops/component/deleteComponent",method:a["b"].DELETE,params:e})}},"713f":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i}));var r=n("a526"),a=n("3bb8");function o(e){return r["a"].request({url:"/devops/cluster/getDeployNetworks",method:a["b"].GET,params:e})}function c(e){return r["a"].request({url:"/devops/cluster/getDeployInfos",method:a["b"].GET,params:e})}function i(e){return r["a"].request({url:"/devops/cluster/createDeployNetwork",method:a["b"].POST,params:e})}},a730:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function a(e,t,n,a,o,c){var i=Object(r["resolveComponent"])("dynamic-table");return Object(r["openBlock"])(),Object(r["createBlock"])(i,{ref:"tableRef",columns:e.columns,"get-list-func":e.GET_ARTIFACTS,rowKey:"id"},null,8,["columns","get-list-func"])}var o=n("1016"),c=n("a526"),i=n("3bb8");function l(e){return c["a"].request({url:"/devops/component/getArtifacts",method:i["b"].GET,params:e})}var u=n("7996"),d=(n("b0c0"),Object(r["createTextVNode"])(" 名称： ")),f=Object(r["createTextVNode"])(" 网络： ");function s(e,t,n,a,o,c){var i=Object(r["resolveComponent"])("a-form-item"),l=Object(r["resolveComponent"])("a-input"),u=Object(r["resolveComponent"])("a-select-option"),s=Object(r["resolveComponent"])("a-select"),b=Object(r["resolveComponent"])("a-form"),m=Object(r["resolveComponent"])("a-modal");return Object(r["openBlock"])(),Object(r["createBlock"])(m,{title:"启动新组件",visible:e.visible,"onUpdate:visible":t[3]||(t[3]=function(t){return e.visible=t}),"confirm-loading":e.confirmLoading,afterClose:e.remove,onOk:e.handleOk,width:"1080px"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{ref:"formRef",model:e.modelRef,"label-col":e.labelCol,"wrapper-col":e.wrapperCol},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{label:"制品"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.modelRef.artifactId),1)]})),_:1}),Object(r["createVNode"])(i,{label:"镜像"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.modelRef.imageName),1)]})),_:1}),Object(r["createVNode"])(i,{label:"组件名称",rules:e.rules.name,name:"name"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{value:e.modelRef.name,"onUpdate:value":t[1]||(t[1]=function(t){return e.modelRef.name=t}),placeholder:"请输入组件名称"},null,8,["value"])]})),_:1},8,["rules"]),Object(r["createVNode"])(i,{label:"部署机器环境"},{default:Object(r["withCtx"])((function(){return[d,Object(r["createVNode"])(s,{style:{width:"220px","margin-right":"30px"},onChange:e.handleNetworkChange},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.networkList,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:e.id,value:t},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["onChange"]),f,Object(r["createVNode"])(s,{defaultValue:e.modelRef.networkId,modelValue:e.modelRef.networkId,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.modelRef.networkId=t}),style:{width:"320px"}},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.networkChildList,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:e.id,value:e.id},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["defaultValue","modelValue"])]})),_:1})]})),_:1},8,["model","label-col","wrapper-col"])]})),_:1},8,["visible","confirm-loading","afterClose","onOk"])}var b,m=n("5530"),p=n("1da1"),O=n("ade3"),j=(n("2ef0"),n("9839")),v=(n("5704"),n("b558")),w=(n("922d"),n("09d9")),h=(n("f2ef"),n("3af3")),k=(n("cd17"),n("ed3b")),g=(n("96cf"),n("159b"),n("b64b"),n("d3b7"),n("713f")),C=n("5b38"),x=Object(r["defineComponent"])({name:"add-modal",components:(b={},Object(O["a"])(b,k["a"].name,k["a"]),Object(O["a"])(b,h["a"].name,h["a"]),Object(O["a"])(b,h["a"].Item.name,h["a"].Item),Object(O["a"])(b,w["a"].name,w["a"]),Object(O["a"])(b,v["a"].name,v["a"]),Object(O["a"])(b,j["b"].name,j["b"]),Object(O["a"])(b,"ASelectOption",j["b"].Option),b),props:{remove:{type:Function},fields:{type:Object,default:function(){return{}}},callback:{type:Function}},setup:function(e){var t=Object(r["ref"])(null),n=Object(r["reactive"])({visible:!0,confirmLoading:!1,networkList:[],networkChildList:[]}),a=Object(r["reactive"])({artifactId:"",name:"",imageName:"",networkId:""});e.fields.id&&Object.keys(a).forEach((function(t){return a[t]=e.fields[t]}));var o={name:[{required:!0,message:"组件名称不能为空"}]};Object(r["onMounted"])(Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.artifactId=e.fields.id,t.next=3,Object(g["c"])();case 3:n.networkList=t.sent.result,console.log(n.networkList);case 5:case"end":return t.stop()}}),t)}))));var c=function(e){n.networkChildList=n.networkList[e].networks,a.networkId=n.networkChildList[0].id},i=function(o){o.preventDefault(),n.confirmLoading=!0,t.value.validate().then(Object(p["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=Object(r["toRaw"])(a),t.next=3,Object(C["a"])(o).finally((function(){return n.confirmLoading=!1}));case 3:n.visible=!1,e.callback&&e.callback();case 5:case"end":return t.stop()}}),t)})))).catch((function(e){console.log("error",e),n.confirmLoading=!1}))};return Object(m["a"])(Object(m["a"])({},Object(r["toRefs"])(n)),{},{formRef:t,rules:o,labelCol:{span:6},wrapperCol:{span:18},modelRef:a,handleOk:i,handleNetworkChange:c})}});x.render=s;var y=x,T=[{title:"ID",dataIndex:"id"},{title:"制品名称",dataIndex:"imageName"},{title:"版本",dataIndex:"version"},{title:"端口映射",dataIndex:"ports"},{title:"创建时间",dataIndex:"createTime"},{title:"最后更新时间",dataIndex:"updateTime"},{title:"操作",dataIndex:"action",width:200,slots:{customRender:"action"},actions:[{type:"button",text:"启动新组件",props:{type:"warning"},func:function(e,t){var n=e.record;return Object(u["a"])(y,{fields:n,callback:t})}}]}],R=Object(r["defineComponent"])({name:"cicd-artifacts",components:{DynamicTable:o["DynamicTable"]},setup:function(){var e=Object(r["ref"])(null);return{columns:T,tableRef:e,GET_ARTIFACTS:l}}});R.render=a;t["default"]=R},d58f:function(e,t,n){var r=n("1c0b"),a=n("7b0b"),o=n("44ad"),c=n("50c4"),i=function(e){return function(t,n,i,l){r(n);var u=a(t),d=o(u),f=c(u.length),s=e?f-1:0,b=e?-1:1;if(i<2)while(1){if(s in d){l=d[s],s+=b;break}if(s+=b,e?s<0:f<=s)throw TypeError("Reduce of empty array with no initial value")}for(;e?s>=0:f>s;s+=b)s in d&&(l=n(l,d[s],s,u));return l}};e.exports={left:i(!1),right:i(!0)}}}]);