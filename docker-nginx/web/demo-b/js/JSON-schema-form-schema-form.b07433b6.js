(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["JSON-schema-form-schema-form"],{5873:function(e,t,r){"use strict";r.r(t);var n=r("5530"),a=(r("4de4"),r("7a23")),i=Object(a["withScopeId"])("data-v-6d740fb7"),c=i((function(e,t,r,c,o,l){var u=Object(a["resolveComponent"])("a-form-item"),f=Object(a["resolveComponent"])("a-spin"),s=Object(a["resolveComponent"])("a-form");return Object(a["openBlock"])(),Object(a["createBlock"])(s,Object(a["mergeProps"])({ref:"schemaFormRef"},e.formItemLayout),{default:i((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.formSchema.formItem.filter((function(e){return!e.hidden})),(function(t,r){return Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:t.field,spinning:t.loading||!1},{default:i((function(){return[Object(a["createVNode"])(u,Object(a["mergeProps"])({help:t.help,extra:t.extra,label:t.label,name:t.field},Object(n["a"])(Object(n["a"])({},t.props),e.validateInfos[t.field])),{default:i((function(){return[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.getComponent(t.type)),Object(a["mergeProps"])({value:e.modelRef[t.field],"onUpdate:value":function(r){return e.modelRef[t.field]=r},"form-item":t},Object(a["toHandlers"])(Object(n["a"])({},e.getTriggerEvent(t)))),null,16,["value","onUpdate:value","form-item"]))]})),_:2},1040,["help","extra","label","name"])]})),_:2},1032,["spinning"])})),128)),e.$slots["operate-button"]?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:0,"wrapper-col":{span:e.formItemLayout.wrapperCol.span,offset:e.formItemLayout.labelCol.span}},{default:i((function(){return[Object(a["renderSlot"])(e.$slots,"operate-button",{},void 0,!0)]})),_:3},8,["wrapper-col"])):Object(a["createCommentVNode"])("",!0)]})),_:1},16)})),o=r("1da1"),l=r("ade3"),u=(r("f2ef"),r("3af3")),f=(r("7f6b"),r("8592")),s=(r("96cf"),r("b0c0"),r("13d5"),r("159b"),r("d3b7"),r("caad"),r("5c8a")),d=r("b703"),b=r("9ac7"),v=r("0148");function g(e,t){var r=null==e?0:e.length;return!!r&&Object(v["a"])(e,t,0)>-1}var m=g;function O(e,t,r){var n=-1,a=null==e?0:e.length;while(++n<a)if(r(t,e[n]))return!0;return!1}var p=O,h=r("a2fb"),j=r("6568"),y=Math.min;function w(e,t,r){var n=r?p:m,a=e[0].length,i=e.length,c=i,o=Array(i),l=1/0,u=[];while(c--){var f=e[c];c&&t&&(f=Object(d["a"])(f,Object(h["a"])(t))),l=y(f.length,l),o[c]=!r&&(t||a>=120&&f.length>=120)?new b["a"](c&&f):void 0}f=e[0];var s=-1,v=o[0];e:while(++s<a&&u.length<l){var g=f[s],O=t?t(g):g;if(g=r||0!==g?g:0,!(v?Object(j["a"])(v,O):n(u,O,r))){c=i;while(--c){var w=o[c];if(!(w?Object(j["a"])(w,O):n(e[c],O,r)))continue e}v&&v.push(O),u.push(g)}}return u}var k=w,I=r("2d5d"),S=r("010c");function A(e){return Object(S["a"])(e)?e:[]}var C=A,P=Object(I["a"])((function(e){var t=Object(d["a"])(e,C);return t.length&&t[0]===e[0]?k(t):[]})),x=P,E=r("32e8"),R=r("85b1"),F=r("9bc4"),B=r("4962"),V=r("d81b"),L=r("511f");function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_(e,t,r[t])}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N.apply(this,arguments)}function D(e){var t=!1;return e&&e.length&&e.every((function(e){return!e.required||(t=!0,!1)})),t}function J(e){return void 0===e||null===e?[]:Array.isArray(e)?e:[e]}function M(e,t,r){var n=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var a=t.split("."),i=0,c=a.length;i<c-1;++i){if(!n&&!r)break;var o=a[i];if(!(o in n)){if(r)throw new Error("please transfer a valid name path to validate!");break}n=n[o]}return{o:n,k:a[i],v:n?n[a[i]]:null,isValid:n&&a[i]in n}}function T(e,t,r){var n=Object(s["a"])(e),i={};Object.keys(t).forEach((function(e){i[e]={autoLink:!1,required:D(t[e])}})),i=Object(a["reactive"])(i);var c=function(r){N(e,q({},Object(s["a"])(n),r)),Object(a["nextTick"])((function(){Object.keys(i).forEach((function(e){i[e]={autoLink:!1,required:D(t[e])}}))}))},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.length?e.filter((function(e){var r=J(e.trigger||"change");return x(r,t).length})):e},l=null,u=function(r){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,i=[],c={},u=function(l){var u=r[l],s=M(e,u,a);if(!s.isValid)return"continue";c[u]=s.v;var d=o(t[u],J(n&&n.trigger));d.length&&i.push(f(u,s.v,d,n||{}).then((function(){return{name:u,errors:[]}}))["catch"]((function(e){return Promise.reject({name:u,errors:e})})))},s=0;s<r.length;s++)u(s);var d=Object(L["a"])(i);l=d;var b=d.then((function(){return l===d?Promise.resolve(c):Promise.reject([])}))["catch"]((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:c,errorFields:t,outOfDate:l!==d})}));return b["catch"]((function(e){return e})),b},f=function(e,t,r,n){var a=Object(B["a"])([e],t,r,q({validateMessages:V["a"]},n),!!n.validateFirst);return i[e].validateStatus="validating",a["catch"]((function(e){return e})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"validating"===i[e].validateStatus&&(i[e].validateStatus=t.length?"error":"success",i[e].help=t[0])})),a},d=function(e,r){var n=[],a=!0;e?n=Array.isArray(e)?e:[e]:(a=!1,n=Object.keys(t));var i=u(n,r||{},a);return i["catch"]((function(e){return e})),i},b=function(e){var r=[];r=e?Array.isArray(e)?e:[e]:Object.keys(t),r.forEach((function(e){i[e]&&N(i[e],{validateStatus:"",help:""})}))},v=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={autoLink:!1},r=[],n=Array.isArray(e)?e:[e],a=0;a<n.length;a++){var i=n[a];"error"===(null===i||void 0===i?void 0:i.validateStatus)&&(t.validateStatus="error",i.help&&r.push(i.help)),t.required=t.required||(null===i||void 0===i?void 0:i.required)}return t.help=r.join("\n"),t},g=n,m=function(e){var r=[];Object.keys(t).forEach((function(t){var n=M(e,t,!1),a=M(g,t,!1);Object(E["a"])(n.v,a.v)||r.push(t)})),d(r,{trigger:"change"}),g=Object(s["a"])(e)},O=null===r||void 0===r?void 0:r.debounce;return Object(a["watch"])(e,O&&O.wait?Object(R["a"])(m,O.wait,Object(F["a"])(O,["wait"])):m,{immediate:r&&!!r.immediate,deep:!0}),Object(a["watch"])(t,(function(){r&&r.validateOnRuleChange&&d()}),{deep:!0}),{modelRef:e,rulesRef:t,initialModel:n,validateInfos:i,resetFields:c,validate:d,validateField:f,mergeValidateInfo:v,clearValidate:b}}var $=T;r("6dd8");var U,H=r("55ac"),z=r("b35d"),G=Object(a["defineComponent"])({name:"dynamic-form",components:Object(n["a"])(Object(n["a"])({},z["default"]),{},(U={},Object(l["a"])(U,f["a"].name,f["a"]),Object(l["a"])(U,u["a"].name,u["a"]),Object(l["a"])(U,u["a"].Item.name,u["a"].Item),U)),props:{formSchema:{required:!0,type:Object},fields:{type:Object,default:function(){return{}}}},setup:function(e,t){var r=Object(a["ref"])(null),i=Object(a["getCurrentInstance"])(),c=Object(n["a"])({labelCol:{span:4},wrapperCol:{span:20}},e.formSchema.formItemLayout),l=Object(a["reactive"])(e.formSchema.formItem.reduce((function(e,t){var r;return null!==(r=t.eventObject)&&void 0!==r||(t.eventObject={}),e[t.field]=t.value,e}),{}));e.fields&&Object.assign(l,e.fields),e.formSchema.formItem.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&t.hasOwnProperty("loading")&&(t.loading=!0),!Object(H["b"])(t.asyncOptions)&&!Object(H["a"])(t.asyncOptions)){e.next=7;break}return e.next=4,t.asyncOptions(t,i).finally((function(){return t.loading=!1}));case 4:t.options=e.sent,e.next=11;break;case 7:if(!Object(H["b"])(t.asyncValue)&&!Object(H["a"])(t.asyncValue)){e.next=11;break}return e.next=10,t.asyncValue(t,i).finally((function(){return t.loading=!1}));case 10:l[t.field]=e.sent;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var u=Object(a["reactive"])(e.formSchema.formItem.filter((function(e){return!e.hidden})).reduce((function(e,t){return t.rules&&(e[t.field]=t.rules),e}),{}));console.log(l,"表单"),console.log(u,"表单验证规则");var f=$(l,u),s=f.resetFields,d=f.validate,b=f.validateInfos,v=f.validateField,g=["input","textarea","select","radio","checkbox","input-number","input-range","switch"],m=function(e){return g.includes(e)?"schema-form-"+e:Object(a["isReactive"])(e)||Object(a["isRef"])(e)?Object(a["createVNode"])(e):e},O=function(e){var t=e.field,r=e.trigger;return function(){return d(t,{trigger:r}).catch((function(){return{}}))}},p=function(e){var t,r={},n=e.field;if(Array.isArray(e.rules))e.rules.forEach((function(e){Array.isArray(e.trigger)?e.trigger.forEach((function(e){return r[e]=O({field:n,trigger:e})})):Object(H["c"])(e.trigger)&&(r[e.trigger]=O({field:n,trigger:e.trigger}))}));else if(null!==(t=e.rules)&&void 0!==t&&t.trigger){var a,i=null===(a=e.rules)||void 0===a?void 0:a.trigger;r[i]=O({field:n,trigger:i}),Array.isArray(i)?i.forEach((function(e){return r[e]=O({field:n,trigger:e})})):Object(H["c"])(i)&&(r[i]=O({field:n,trigger:i}))}return r};return{formItemLayout:c,validate:d,resetFields:s,validateField:v,validateInfos:b,modelRef:l,schemaFormRef:r,getTriggerEvent:p,getComponent:m}}});r("c115");G.render=c,G.__scopeId="data-v-6d740fb7";t["default"]=G},c115:function(e,t,r){"use strict";r("ea8b")},ea8b:function(e,t,r){}}]);