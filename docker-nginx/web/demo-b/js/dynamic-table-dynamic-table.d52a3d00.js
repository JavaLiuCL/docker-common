(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dynamic-table-dynamic-table","JSON-schema-form","dynamic-table-hooks","dynamic-table-hooks-useDragCol","dynamic-table-hooks-useDraggable","dynamic-table-hooks-useExpandLoading"],{"2a26":function(e,t,n){"use strict";n("b2a3"),n("8f3c"),n("6ba6")},"5f73":function(e,t,n){"use strict";n.r(t);var o=n("5873");n.d(t,"SchemaForm",(function(){return o["default"]}))},"682a":function(e,t,n){},"6c0e":function(e,t,n){"use strict";n.r(t);var o=n("5530"),c=(n("4de4"),n("7a23")),r=Object(c["withScopeId"])("data-v-5d504bf2");Object(c["pushScopeId"])("data-v-5d504bf2");var a=Object(c["createTextVNode"])("数据列表"),i=Object(c["createTextVNode"])(" 添加 "),u=Object(c["createTextVNode"])(" 您确定要删除吗？ ");Object(c["popScopeId"])();var s,l=r((function(e,t,n,s,l,d){var b=Object(c["resolveComponent"])("a-col"),f=Object(c["resolveComponent"])("a-button"),p=Object(c["resolveComponent"])("a-row"),m=Object(c["resolveComponent"])("Option"),O=Object(c["resolveComponent"])("a-select"),j=Object(c["resolveComponent"])("a-popconfirm"),g=Object(c["resolveComponent"])("a-table");return Object(c["openBlock"])(),Object(c["createBlock"])("div",null,[e.$slots.tabelTool||e.addItemFunc?(Object(c["openBlock"])(),Object(c["createBlock"])(p,{key:0,type:"flex",class:"tabel-header"},{default:r((function(){return[Object(c["createVNode"])(b,{flex:12},{default:r((function(){return[a]})),_:1}),Object(c["createVNode"])(b,{class:"right",flex:12},{default:r((function(){return[Object(c["renderSlot"])(e.$slots,"tabelTool",{},void 0,!0),e.addItemFunc?(Object(c["openBlock"])(),Object(c["createBlock"])(f,{key:0,type:"primary",onClick:e.addItem},{default:r((function(){return[i]})),_:1},8,["onClick"])):Object(c["createCommentVNode"])("",!0)]})),_:3})]})),_:1})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(g,Object(c["mergeProps"])({columns:e.columns,loading:e.loading,rowSelection:e.rowSelection,rowKey:e.rowKey,size:"middle","data-source":e.data,pagination:e.pageOption,bordered:"",customRow:e.isCustomRow?e.customRow:null,onChange:e.paginationChange},Object(o["a"])(Object(o["a"])({},e.$props),e.$attrs)),Object(c["createSlots"])({_:2},[Object(c["renderList"])(e.$slots,(function(t,n){return{name:n,fn:r((function(t){return[Object(c["renderSlot"])(e.$slots,n,t,void 0,!0)]}))}})),Object(c["renderList"])(e.columns.filter((function(e){return e.slots})),(function(t){return{name:t.slots.customRender,fn:r((function(n){return[e.$slots[t.slots.customRender]?Object(c["renderSlot"])(e.$slots,t.slots.customRender,Object(c["mergeProps"])({key:0},n),void 0,!0):(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:1},["action"!==t.slots.customRender?(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:0},["component"==t.slotsType?(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["resolveDynamicComponent"])(t.slotsFunc(n.record)),{key:0})):Object(c["createCommentVNode"])("",!0),"format"==t.slotsType?(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:1},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.slotsFunc(n.record[t.dataIndex||t.key],n.record)),1)],64)):Object(c["createCommentVNode"])("",!0)],64)):Object(c["createCommentVNode"])("",!0),"action"==t.slots.customRender?(Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:t.slots.customRender,class:"actions"},[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.actions,(function(t,a){return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,["select"==t.type?(Object(c["openBlock"])(),Object(c["createBlock"])(O,{value:n.record[t.key],"onUpdate:value":function(e){return n.record[t.key]=e},key:a,size:"small"},{default:r((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(t.options,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(m,{value:e.value,key:e.value},{default:r((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.label),1)]})),_:2},1032,["value"])})),128))]})),_:2},1032,["value","onUpdate:value"])):Object(c["createCommentVNode"])("",!0),"button"==t.type?(Object(c["openBlock"])(),Object(c["createBlock"])(f,Object(c["mergeProps"])({key:1},Object(o["a"])(Object(o["a"])({},e.buttonProps),t.props),{onClick:function(o){return e.actionEvent(n.record,t.func,a)},key:a}),{default:r((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.text),1)]})),_:2},1040,["onClick"])):Object(c["createCommentVNode"])("",!0),"popconfirm"==t.type?(Object(c["openBlock"])(),Object(c["createBlock"])(j,{key:a,placement:"leftTop",onConfirm:function(o){return e.actionEvent(n.record,t.func,10001)}},{title:r((function(){return[u]})),default:r((function(){return[Object(c["createVNode"])(f,Object(o["a"])(Object(o["a"])({},e.buttonProps),t.props),{default:r((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.text),1)]})),_:2},1040)]})),_:2},1032,["onConfirm"])):Object(c["createCommentVNode"])("",!0)],64)})),256))])):Object(c["createCommentVNode"])("",!0)],64))]}))}}))]),1040,["columns","loading","rowSelection","rowKey","data-source","pagination","customRow","onChange"])])})),d=n("1da1"),b=n("ade3"),f=(n("0032"),n("e32c")),p=(n("de6a"),n("9a63")),m=(n("2a26"),n("768f")),O=(n("2ef0"),n("9839")),j=(n("288f"),n("cdeb")),g=(n("c68a"),n("0020")),v=(n("96cf"),n("b0c0"),n("7db0"),n("d3b7"),n("b95b")),h=n("7996"),y=n("9720"),k=Object(c["defineComponent"])({name:"dynamic-table",props:{columns:{type:Object},getListFunc:{type:Function},addItemFunc:{type:Function},actionEventFun:{type:Function},rowSelection:{type:Object},isCustomRow:{type:Boolean,default:!1},noPage:{type:Boolean,default:!1},rowKey:{type:[String,Function]},pageOption:{type:Object,default:function(){return{}}}},components:(s={},Object(b["a"])(s,g["a"].name,g["a"]),Object(b["a"])(s,j["a"].name,j["a"]),Object(b["a"])(s,O["b"].name,O["b"]),Object(b["a"])(s,m["a"].name,m["a"]),Object(b["a"])(s,"Option",O["b"].Option),Object(b["a"])(s,p["a"].name,p["a"]),Object(b["a"])(s,f["a"].name,f["a"]),Object(b["a"])(s,"AButton",v["AButton"]),s),setup:function(e,t){t.attrs,t.emit,t.slots;var n,r=Object(h["b"])(),a=r.pageOption;Object(y["useDragCol"])(e.columns);var i=Object(c["reactive"])({expandItemRefs:{},customRow:function(){return{}},data:[],pageOption:Object.assign(a,e.pageOption),actions:(null===(n=e.columns.find((function(e){return"action"==(e.dataIndex||e.key)})))||void 0===n?void 0:n.actions)||[],loading:!1}),u=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var n,c,r,a,u,s,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:{},n=Object(o["a"])(Object(o["a"])({pageNo:i.pageOption.current,pageSize:i.pageOption.pageSize},e.pageOption),n),i.loading=!0,t.next=5,e.getListFunc(n).finally((function(){return i.loading=!1}));case 5:c=t.sent,r=c.result,a=r.pageNo,u=r.pageSize,s=r.totalRecord,Object.assign(i.pageOption,{current:~~a,pageSize:~~u,total:~~s}),i.data=e.noPage?r:r.results,i.customRow=Object(y["useDraggable"])(i.data);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();u();var s=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(n,o,c){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o({record:n,props:e},(function(){return setTimeout((function(){return u()}))}));case 2:10001===c&&i.data.length<2&&(i.pageOption.current=Math.max(1,i.pageOption.current-1)),e.actionEventFun&&e.actionEventFun(n,c);case 4:case"end":return t.stop()}}),t)})));return function(e,n,o){return t.apply(this,arguments)}}(),l=function(){e.addItemFunc&&e.addItemFunc()},b=function(t,n,c){var r=c.field,a=c.order;i.pageOption=Object(o["a"])(Object(o["a"])({},i.pageOption),t),u(Object(o["a"])(Object(o["a"])(Object(o["a"])({pageSize:t.pageSize,pageNo:t.current},e.pageOption),n),{},{field:r,order:a}))},f={size:"small"};return Object(o["a"])(Object(o["a"])({},Object(c["toRefs"])(i)),{},{buttonProps:f,addItem:l,actionEvent:s,refreshTableData:u,paginationChange:b})}});n("86c7");k.render=l,k.__scopeId="data-v-5d504bf2";t["default"]=k},"768f":function(e,t,n){"use strict";var o=n("7a23"),c=n("0464"),r=n("f933"),a=n("f54f"),i=n("4d91"),u=n("1d6f"),s=n("b488"),l=n("b92b"),d=n("39b7"),b=n("5efb"),f=n("e5cd"),p=n("02ea"),m=n("4df5"),O=n("46b7");function j(){return j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},j.apply(this,arguments)}var g=Object(a["a"])(),v=Object(l["a"])(),h=Object(o["defineComponent"])({name:"APopconfirm",mixins:[s["a"]],props:j(j({},g),{prefixCls:i["a"].string,transitionName:i["a"].string.def("zoom-big"),content:i["a"].any,title:i["a"].any,trigger:g.trigger.def("click"),okType:v.type.def("primary"),disabled:i["a"].looseBool.def(!1),okText:i["a"].any,cancelText:i["a"].any,icon:i["a"].any,okButtonProps:i["a"].object,cancelButtonProps:i["a"].object,onConfirm:i["a"].func,onCancel:i["a"].func,onVisibleChange:i["a"].func}),emits:["update:visible","confirm","cancel","visibleChange"],setup:function(){return{configProvider:Object(o["inject"])("configProvider",m["b"])}},data:function(){var e=Object(u["j"])(this),t={sVisible:!1};return"visible"in e&&(t.sVisible=e.visible),"defaultVisible"in e&&(t.sVisible=e.defaultVisible),t},watch:{visible:function(e){this.sVisible=e}},methods:{onConfirmHandle:function(e){this.setVisible(!1,e),this.$emit("confirm",e)},onCancelHandle:function(e){this.setVisible(!1,e),this.$emit("cancel",e)},onVisibleChangeHandle:function(e){var t=this.$props.disabled;t||this.setVisible(e)},setVisible:function(e,t){Object(u["n"])(this,"visible")||this.setState({sVisible:e}),this.$emit("update:visible",e),this.$emit("visibleChange",e,t)},getPopupDomNode:function(){return this.$refs.tooltip.getPopupDomNode()},renderOverlay:function(e,t){var n=this,c=this.okType,r=this.okButtonProps,a=this.cancelButtonProps,i=Object(u["g"])(this,"icon")||Object(o["createVNode"])(d["a"],null,null),s=Object(u["r"])(j({size:"small",onClick:this.onCancelHandle},a)),l=Object(u["r"])(j({type:c,size:"small",onClick:this.onConfirmHandle},r));return Object(o["createVNode"])("div",{class:"".concat(e,"-inner-content")},[Object(o["createVNode"])("div",{class:"".concat(e,"-message")},[i,Object(o["createVNode"])("div",{class:"".concat(e,"-message-title")},[Object(u["g"])(this,"title")])]),Object(o["createVNode"])("div",{class:"".concat(e,"-buttons")},[Object(o["createVNode"])(b["a"],s,{default:function(){return[Object(u["g"])(n,"cancelText")||t.cancelText]}}),Object(o["createVNode"])(b["a"],l,{default:function(){return[Object(u["g"])(n,"okText")||t.okText]}})])])}},render:function(){var e,t=this,n=Object(u["j"])(this),a=n.prefixCls,i=this.configProvider.getPrefixCls,s=i("popover",a),l=Object(c["a"])(n,["title","content","cancelText","okText","onUpdate:visible"]),d=Object(o["createVNode"])(f["a"],{componentName:"Popconfirm",defaultLocale:p["a"].Popconfirm,children:function(e){return t.renderOverlay(s,e)}},null),b=j(j({},l),{title:d,prefixCls:s,visible:this.sVisible,ref:"tooltip",onVisibleChange:this.onVisibleChangeHandle});return Object(o["createVNode"])(r["a"],b,{default:function(){return[null===(e=t.$slots)||void 0===e?void 0:e.default()]}})}});t["a"]=Object(O["b"])(h)},"76b3":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var o,c=n("5530"),r=n("7a23"),a=Object(r["withScopeId"])("data-v-d7b52470"),i=a((function(e,t,n,o,c,i){var u=Object(r["resolveComponent"])("schema-form"),s=Object(r["resolveComponent"])("a-modal");return Object(r["openBlock"])(),Object(r["createBlock"])(s,Object(r["mergeProps"])(e.$attrs,{visible:e.visible,"onUpdate:visible":t[1]||(t[1]=function(t){return e.visible=t}),"confirm-loading":e.confirmLoading,afterClose:e.remove,onOk:e.onOk}),{default:a((function(){return[Object(r["createVNode"])(u,{ref:"dynamicForm",fields:e.fields,"form-schema":e.dynamicValidateForm},null,8,["fields","form-schema"])]})),_:1},16,["visible","confirm-loading","afterClose","onOk"])})),u=n("1da1"),s=n("ade3"),l=(n("cd17"),n("ed3b")),d=(n("96cf"),n("b0c0"),n("159b"),n("7db0"),n("d3b7"),n("5f73")),b=Object(r["defineComponent"])({name:"operate-modal",components:(o={},Object(s["a"])(o,l["a"].name,l["a"]),Object(s["a"])(o,"SchemaForm",d["SchemaForm"]),o),props:{remove:{type:Function},formSchema:{type:Object,default:function(){return{}}},fields:{type:Object,default:function(){return{}}},hiddenFields:{type:Array,default:function(){return[]}},handleOk:{type:Function}},setup:function(e){var t=Object(r["ref"])(null),n=Object(r["reactive"])({visible:!0,confirmLoading:!1,dynamicValidateForm:e.formSchema});e.hiddenFields.forEach((function(t){return n.dynamicValidateForm.formItem.find((function(e){return e.field==t})).hidden=!!e.fields}));var o=function(){n.confirmLoading=!0,t.value.validate().then(function(){var o=Object(u["a"])(regeneratorRuntime.mark((function o(c){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,(e.handleOk&&e.handleOk(t.value.modelRef,n)).finally((function(){return n.confirmLoading=!1}));case 2:n.visible=!1;case 3:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()).catch((function(e){console.log("error",e),n.confirmLoading=!1}))};return Object(c["a"])(Object(c["a"])({},Object(r["toRefs"])(n)),{},{onOk:o,dynamicForm:t})}});b.render=i,b.__scopeId="data-v-d7b52470";var f=b,p=function(e){var t,n=document.createElement("div"),o=function(){t=null,Object(r["render"])(null,n),n.remove()};return console.log("options",Object(c["a"])(Object(c["a"])({},e),{},{remove:o})),t=Object(r["createVNode"])(f,Object(c["a"])(Object(c["a"])({},e),{},{remove:o})),Object(r["render"])(t,n),t}},"780e":function(e,t,n){"use strict";n.r(t),n.d(t,"useExpandLoading",(function(){return a}));var o=n("1da1"),c=(n("96cf"),n("d3b7"),n("7a23")),r=n("8fe6"),a=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,u,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.expanded,a=t.record,i=t.expandItemEl,u=t.asyncFunc,s=t.params,!n||!a.children||Array.isArray(a.children)){e.next=8;break}return l=i.closest("td").querySelector(".ant-table-row-expand-icon"),Object(c["render"])(Object(c["createVNode"])(r["a"]),l),e.next=6,Object(c["nextTick"])();case 6:return l.classList.add("loading-icon"),e.abrupt("return",u(s).finally(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(c["render"])(null,l),e.next=3,Object(c["nextTick"])();case 3:l.classList.remove("loading-icon");case 4:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},7996:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));n("1da1"),n("96cf"),n("d3b7");var o=n("7a23");var c=n("5530");function r(e){var t=Object(o["ref"])(Object(c["a"])({current:1,pageSize:10,total:0,pageSizeOptions:["10","20","30","40","50"],showQuickJumper:!0,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,n){var o;return null===e||void 0===e||null===(o=e.pageChange)||void 0===o?void 0:o.call(e,t,n)},onShowSizeChange:function(t,n){var o;return null===e||void 0===e||null===(o=e.pageChange)||void 0===o?void 0:o.call(e,t,n)}},e)),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(t.value,e),console.log(t.value,"更新分页配置")};return{pageOption:t,updatePageOption:n}}n("76b3"),n("159b"),n("b64b"),n("b0c0");var a=function(e,t,n){var r,a=document.createElement("div"),i=function(){r=null,Object(o["render"])(null,a),a.remove()};return r=Object(o["createVNode"])(e),r.props=Object(o["mergeProps"])(r.props,Object(c["a"])({remove:i},t)),Object(o["render"])(r,a),r.component.ctx.remove=i,console.log(e,"组件"),console.log(r,"组件_instance"),r.component.ctx.$updateProps=function(e){e&&Object.keys(e).forEach((function(t){r.component.props[t]=e[t]}))},r.component.ctx}},"86c7":function(e,t,n){"use strict";n("682a")},"8f3c":function(e,t,n){},9720:function(e,t,n){"use strict";n.r(t);var o=n("9bfe");n.d(t,"useDragCol",(function(){return o["useDragCol"]}));var c=n("ea2c");n.d(t,"useDraggable",(function(){return c["useDraggable"]}));var r=n("780e");n.d(t,"useExpandLoading",(function(){return r["useExpandLoading"]}))},"9bfe":function(e,t,n){"use strict";n.r(t),n.d(t,"useDragCol",(function(){return o}));n("159b");var o=function(e){var t,n,o,c,r=function(){return c.onmouseup=c.onmousedown=c.onmousemove=null};e.forEach((function(e){return e.customHeaderCell=function(e){return{onmouseenter:function(){var a,i;c=e.title[0].el.closest("th"),null!==(a=o)&&void 0!==a||(o=c.closest(".ant-table-wrapper")),null!==(i=n)&&void 0!==i||(n=o.clientWidth),c.onmousemove=function(e){e.offsetX>this.offsetWidth-10?this.style.cursor="col-resize":this.style.cursor="default",void 0==t&&(t=this),null!=t.mouseDown&&1==t.mouseDown&&(t.style.cursor="default",t.oldWidth+(e.x-t.oldX)>0&&(t.width=t.oldWidth+(e.x-t.oldX)),t.style.width=t.width,o.style.width=n+(e.x-t.oldX)+"px",t.style.cursor="col-resize")},c.onmousedown=function(e){t=this,e.offsetX>t.offsetWidth-10&&(t.mouseDown=!0,t.oldX=e.x,t.oldWidth=t.offsetWidth)},c.onmouseup=r,o.onmouseup=function(){r(),void 0==t&&(t=this),t.mouseDown=!1,t.style.cursor="default",n=o.clientWidth}},onmouseup:function(){return r}}}}))}},ea2c:function(e,t,n){"use strict";function o(e){var t,n,o=function(o){return{draggable:!0,ondrag:function(e){t=o},ondrop:function(e){n=o},ondragend:function(o){if(t!==n){var c=e.indexOf(t),r=e.indexOf(n),a=[e[r],e[c]];e[c]=a[0],e[r]=a[1]}},ondragover:function(e){return!1}}};return o}n.r(t),n.d(t,"useDraggable",(function(){return o}))}}]);